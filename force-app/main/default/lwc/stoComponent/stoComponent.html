<template>
    <div class="decorator-wrapper">
        <div class="header">
            <div class="headlineholder"></div>
            <h2 class="typo-sidetittel">{label.headline}</h2>
        </div>
        <!-- Start of write new message-->
        <template if:true={shownewmessage}>
            <div class="panel text-center">
                <img src={fillform} alt="Fyll inn" class="ficon" />
                <h2 class="typo-undertittel blokk-s">{selectedTheme.Label}</h2>
                <p class="typo-normal typo-normal blokk-xs">{label.textareadescription}</p>
                <div class="inputarea">
                    <lightning-textarea
                        name="input1"
                        onchange={inputChange}
                        variant="label-hidden"
                        label="Skriv din melding her"
                        maxlength="32000"
                    ></lightning-textarea>
                    <template if:true={showErrorNoMessage}>
                        <p class="typo-feilmelding">{label.EMPTY_TEXT_FIELD_ERROR}</p>
                    </template>
                    <div class="skjemaelement checkbox">
                        <input
                            type="checkbox"
                            class="skjemaelement__input checkboks"
                            data-id="checkbox"
                            id="godkjennVilkaar"
                            aria-invalid="false"
                            name="godkjennVilkaar"
                            onchange={togglechecked}
                            aria-describedby="checkbox-feilmelding"
                            checked={acceptedTerms}
                        /><label class="skjemaelement__label" for="godkjennVilkaar">{label.acceptermtext}</label
                        ><a onclick={showTerms} class="slds-var-p-left_small lenke vilkar-link"
                            >{label.showtermstext}</a
                        >
                        <template if:true={showError}>
                            <p class="typo-feilmelding">{label.ACCEPT_TERMS_ERROR}</p>
                        </template>
                    </div>
                    <c-community-modal>
                        <h1
                            slot="modalHeader"
                            tabindex="0"
                            class="slds-var-m-top_x-large typo-sidetittel text-center blokk-l"
                        >
                            {label.SERVICE_TERMS_HEADER}
                        </h1>
                        <div slot="modalContent">
                            <section>
                                <form class="betingelser-panel panel side-innhold">
                                    <div class="blokk-m slds-var-m-top_medium" style="text-align: left">
                                        <lightning-formatted-rich-text
                                            value={label.SERVICE_TERMS}
                                        ></lightning-formatted-rich-text>
                                    </div>
                                </form>
                            </section>
                        </div>
                        <div slot="modalFooter">
                            <div class="slds-var-p-bottom_x-large svar-godta text-center blokk-m">
                                <button
                                    class="knapp knapp--hoved"
                                    aria-controls="betingelser"
                                    onclick={termsAccepted}
                                    type="submit"
                                >
                                    {label.ACCEPT_TERMS_BUTTON}
                                </button>
                            </div>
                            <div class="text-center">
                                <button
                                    class="knapp knapp--flat"
                                    type="submit"
                                    aria-controls="betingelser"
                                    role="button"
                                    onclick={termsDenied}
                                >
                                    {label.DENY_TERMS_BUTTON}
                                </button>
                            </div>
                        </div>
                    </c-community-modal>
                </div>
                <button class="knapp knapp--hoved" type="submit" aria-disabled="false" onclick={submitrequest}>
                    Send
                </button>
            </div>
        </template>

        <!-- End write-->
        <!-- Start list of all items-->
        <template if:false={shownewmessage}>
            <template for:each={themes} for:item="theme">
                <c-sto-Theme-Item theme={theme} onthemeselected={handleselectedtheme} key={theme.Id}></c-sto-Theme-Item>
            </template>
        </template>
        <!-- End list of all items-->
    </div>
</template>
