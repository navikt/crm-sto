<template>
    <div style="display: flex; text-align: initial; position: relative; align-items: center" class="">
        <c-sto-Message-Inbox-Item style="flex-grow: 1" class="override" thread={thread}>
            <div slot="endSection" style="display: contents; margin-left: auto">
                <!-- Fake invisible button to "reserve" enough space for the absolute button -->
                <c-ds-button
                    size="small"
                    style="
                        margin-right: 24px;
                        margin-left: 10px;
                        white-space: nowrap;
                        text-align: center;
                        visibility: hidden;
                    "
                    variant="secondary"
                    text="Avslutt samtale"
                >
                </c-ds-button>
                <span
                    style="margin-right: 24px; margin-left: auto"
                    class="nav-frontend-chevron chevronboks chevron chevron--hoyre lenkepanel__indikator"
                ></span>
            </div>
        </c-sto-Message-Inbox-Item>
        <div>
            <!-- The actual button, absolutely positioned above to avoid problems with having a button within a button -->
            <c-ds-button
                class="endDialogBtn"
                size="small"
                style="
                    position: absolute;
                    right: 69px;
                    transform: translateY(-50%);
                    white-space: nowrap;
                    text-align: center;
                "
                variant="secondary"
                onbuttonclick={openModal}
                text="Avslutt samtale"
            >
            </c-ds-button>
        </div>
        <div>
            <c-community-modal show-modal={modalOpen} onmodalclosed={closeModal} onkeyup={handleKeyboardEvent}>
                <h1 slot="modalHeader" class="slds-var-m-top_x-large typo-sidetittel text-center blokk-l">
                    Avslutt samtale
                </h1>
                <div slot="modalContent">
                    <section>
                        <form class="betingelser-panel panel side-innhold">
                            <div class="blokk-m slds-var-m-top_medium" style="text-align: left">
                                <lightning-formatted-rich-text value="Hei"></lightning-formatted-rich-text>
                            </div>
                        </form>
                    </section>
                </div>
                <div slot="modalFooter" style="display: flex; gap: 10px; justify-content: center">
                    <c-ds-button size="medium" variant="primary" text="Ja, avslutt samtale" onbuttonclick={closeThread}>
                    </c-ds-button>

                    <c-ds-button
                        size="medium"
                        variant="secondary"
                        text="Avbryt"
                        onbuttonclick={closeModal}
                        class="lastfocusable"
                    >
                    </c-ds-button>
                </div>
            </c-community-modal>
        </div>
        <div class={backdropClass} onclick={closeModal}></div>
    </div>
</template>
